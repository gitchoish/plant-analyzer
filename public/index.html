<!DOCTYPE html>
<html>
<head>
  <title>AI 식물 닥터</title>
</head>
<body>
  <h2>식물 사진을 올리고 문제를 분석해보세요!</h2>
  <input type="file" id="imageInput"><br><br>
  <textarea id="plantInfo" placeholder="식물 이름이나 상태를 적어주세요" rows="4" cols="50"></textarea><br><br>
  <button onclick="analyze()">분석하기</button>
  <pre id="result"></pre>

  <script>
    async function analyze() {
      const file = document.getElementById('imageInput').files[0];
      const plantInfo = document.getElementById('plantInfo').value;
      const reader = new FileReader();

      reader.onload = async function () {
        const base64Image = reader.result;

        const response = await fetch('/analyze', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            imageBase64: base64Image,
            plantInfo: plantInfo
          })
        });

        const data = await response.json();
        document.getElementById('result').textContent = data.reply;
      };

      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
